{"version":3,"sources":["Auth/Auth.js","NewsCard/NewsCard.js","NewsPanel/NewsPanel.js","Base/Base.js","Login/LoginForm.js","Login/LoginPage.js","SignUp/SignUpForm.js","SignUp/SignUpPage.js","App/App.js","index.js"],"names":["Auth","token","email","localStorage","setItem","getItem","removeItem","NewsCard","url","this","sendClickLog","window","open","getEmail","props","news","digest","request","Request","encodeURI","method","headers","getToken","cache","fetch","className","onClick","redirectToUrl","src","urlToImage","alt","title","description","source","id","name","reason","time","React","Component","NewsPanel","state","pageNum","totalPages","loadedAll","handleScroll","bind","isUserAuthenticated","loadMoreNews","_","debounce","addEventListener","scrollY","pageYOffset","document","documentElement","scrollTop","innerHeight","body","offsetHeight","console","log","e","then","res","json","length","setState","concat","news_list","map","href","renderNews","history","replace","withRouter","children","to","deauthenticateUser","push","LoginForm","onSubmit","onChange","errors","user","action","summary","type","htmlFor","password","value","LoginPage","context","processForm","changeUser","event","preventDefault","JSON","stringify","response","status","error","authenticateUser","message","field","target","SignUpForm","SignUpPage","confirm_password","App","path","component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2a4ce19e.chunk.js","sourcesContent":["class Auth {\n    /**\n    * Authenticate a user. Save a token string in Local Storage\n    *\n    * @param {string} token\n    * @param {string} email\n    */\n    static authenticateUser(token, email) {\n        localStorage.setItem('token', token);\n        localStorage.setItem('email', email);\n    }\n    /**\n    * Check if a user is authenticated - check if a token is saved in Local S\n    torage\n    *\n    * @returns {boolean}\n    */\n    static isUserAuthenticated() {\n        return localStorage.getItem('token') !== null;\n    }\n    /**\n    * Deauthenticate a user. Remove token and email from Local Storage.\n    *\n    */\n    static deauthenticateUser() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('email');\n    }\n    /**\n    * Get a token value.\n    *\n    * @returns {string}\n    */\n    static getToken() {\n        return localStorage.getItem('token');\n    }\n    /**\n    * Get email.\n    *\n    * @returns {string}\n    */\n    static getEmail() {\n        return localStorage.getItem('email');\n    }\n}\nexport default Auth;","import './NewsCard.css';\nimport React from 'react';\nimport Auth from '../Auth/Auth';\nimport {Button} from \"bootstrap\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar'\n\nclass NewsCard extends React.Component {\n    redirectToUrl(url) {\n        this.sendClickLog();\n        window.open(url, '_blank');\n    }\n    sendClickLog() {\n        let url = 'http://localhost:3000/news/userId/' + Auth.getEmail()\n            + '/newsId/' + this.props.news.digest;\n        let request = new Request(encodeURI(url), {\n            method: 'POST',\n            headers: {\n                'Authorization': 'bearer ' + Auth.getToken(),\n            },\n            cache: \"no-cache\"\n        });\n\n        fetch(request);\n    }\n    render() {\n        return (\n            <div>\n                {/*<Button variant=\"outline-primary\">Primary</Button>*/}\n                <div className=\"news-container\" onClick={() => this.redirectToUrl(this.props.news.url)}>\n                    <div className='row'>\n                        <div className='col s4 fill'>\n                            <img src={this.props.news.urlToImage} alt='news' />\n                        </div>\n                        <div className='col s8'>\n                            <div className='news-intro-col'>\n                                <div className='news-intro-panel'>\n                                    <h4>{this.props.news.title}</h4>\n                                    <div className='news-description'>\n                                        <p>{this.props.news.description}</p>\n                                        {/*<p>Fuck Fuck</p>*/}\n                                        <div>\n                                            {this.props.news.source.id != null && <div className='chip light-blue news-chip'>{this.props.news.source.name}</div>}\n                                            {this.props.news.reason != null && <div className='chip light-green news-chip'>{this.props.news.reason}</div>}\n                                            {this.props.news.time != null && <div className='chip amber news-chip'>{this.props.news.time}</div>}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default NewsCard;","import './NewsPanel.css';\nimport _ from 'lodash';\nimport React from 'react';\nimport Auth from '../Auth/Auth';\n\nimport NewsCard from '../NewsCard/NewsCard';\nimport { Link, withRouter } from 'react-router-dom';\n\nclass NewsPanel extends React.Component {\n    constructor() {\n        super();\n        this.state = { news: null, pageNum: 1, totalPages: 1, loadedAll: false };\n        this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n        if (Auth.isUserAuthenticated()) {\n            this.loadMoreNews();\n        }\n        // 防抖\n        this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\n        window.addEventListener('scroll', this.handleScroll);\n    }\n    handleScroll() {\n        let scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;\n        if ((window.innerHeight + scrollY) >= (document.body.offsetHeight - 50)) {\n            // 滚动到了最底部。\n            console.log('Loading more news');\n            this.loadMoreNews();\n        }\n    }\n    loadMoreNews(e) {\n        if (this.state.loadedAll === true) {\n            return;\n        }\n        let url = 'http://localhost:3000/news/userId/' + Auth.getEmail() + '/pageNum/' + this.state.pageNum\n        let request = new Request(encodeURI(url), {\n            method: 'GET',\n            headers: {\n                'Authorization': 'bearer ' + Auth.getToken(),\n            },\n            cache: 'no-cache',\n        });\n\n        fetch(request)\n            .then((res) => res.json())\n            .then((news) => {\n                if (!news || news.length === 0) {\n                    this.setState({ loadedAll: true });\n                }\n                this.setState({\n                    news: this.state.news ? this.state.news.concat(news) : news,\n                    pageNum: this.state.pageNum + 1\n                });\n            });\n    }\n\n    renderNews() {\n        var news_list = this.state.news.map(function (news) {\n            return (\n                <a className='list-group-item' key={news.digest} href=\"#\">\n                    <NewsCard news={news} />\n                </a>\n            );\n        });\n\n        return (\n            <div className=\"container-fluid\">\n                <div className='list-group'>\n                    {news_list}\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        if (Auth.isUserAuthenticated()) {\n            if (this.state.news) {\n                return (\n                    <div>\n                        {this.renderNews()}\n                    </div>\n                );\n            } else {\n                return (\n                    <div>\n                        <div id='msg-app-loading'>\n                            Loading\n                        </div>\n                    </div>\n                )\n            }\n        } else {\n            this.props.history.replace(\"/login\")\n\n            return (\n                <div className='container'>\n                    Please login first\n                </div>\n            )\n        }\n    }\n}\n// export default NewsPanel;\nexport default withRouter(NewsPanel);\n","import React from 'react';\nimport Auth from '../Auth/Auth';\nimport PropTypes from 'prop-types';\n\n// import './Base.css';\nimport { Link, withRouter } from 'react-router-dom';\n\nconst Base = function ({ children, history }) {\n    return (\n        <div>\n            <nav className=\"nav-bar  light-blue darken-4\">\n                <div className=\"nav-wrapper\">\n                    {/* <a href=\"/\" className=\"brand-logo\">&nbsp;&nbsp;News Feed</a> */}\n                    <Link to=\"/\" className=\"brand-logo\">&nbsp;&nbsp;News Feed</Link>\n\n                    <ul id=\"nav-mobile\" className=\"right\">\n                        {Auth.isUserAuthenticated() ?\n                            (<div>\n                                <li>{Auth.getEmail()}</li>\n                                <li>\n\n                                    <a href='/' onClick={() => {\n                                        Auth.deauthenticateUser(() => this.props.history.push(\"/logout\"));\n                                    }}>Log out</a>\n                                </li>\n\n                            </div>)\n                            :\n                            (<div>\n                                {/* <li><a href=\"/login\">Log in</a></li>\n                                <li><a href=\"/signup\">Sign up</a></li> */}\n                                <li><Link to=\"/login\">Log in</Link></li>\n                                <li><Link to=\"/signup\">Sign up</Link></li>\n                            </div>)\n                        }\n                    </ul>\n                </div>\n            </nav>\n            <br />\n            {children}\n        </div>\n    )\n}\n// 规定必须传入参数\nBase.propTypes = {\n    children: PropTypes.object.isRequired\n};\n// export default Base;\nexport default withRouter(Base);\n","import React from 'react';\nimport './LoginForm.css';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nconst LoginForm = ({\n    onSubmit,\n    onChange,\n    errors,\n    user,\n}) => (\n    <div className=\"container\">\n        <div className=\"card-panel login-panel\">\n            <form className=\"col s12\" action=\"/\" onSubmit={onSubmit}>\n                <h4 className=\"center-align\">Login</h4>\n                {errors.summary && <div className=\"row\"><p className=\"error-message\">{errors.summary}</p></div>}\n                \n                <div className=\"row\">\n                    <div className=\"input-field col s12\">\n                        <input className=\"validate\" id=\"email\" type=\"email\" name=\"email\"\n                            onChange={onChange} />\n                        <label htmlFor='email'>Email</label>\n                    </div>\n                </div>\n                {errors.email && <div className=\"row\"><p className=\"error-message\">\n                    {errors.email}</p></div>}\n                <div className=\"row\">\n                    <div className=\"input-field col s12\">\n                        <input className=\"validate\" id=\"password\" type=\"password\"\n                            name=\"password\" onChange={onChange} />\n                        <label htmlFor='password'>Password</label>\n                    </div>\n                </div>\n                {errors.password && <div className=\"row\"><p className=\"error-message\">{errors.password}</p></div>}\n                <div className=\"row right-align\">\n                    <button type=\"submit\" className=\"waves-effect waves-light btn light-blue darken-4\" value='Log in'>Log in</button>\n                </div>\n                <div className=\"row\">\n                    <p className=\"right-align\"> New to here? <Link to=\"/signup\">Sign up</Link></p>\n                </div>\n            </form>\n        </div>\n    </div>\n);\n\nLoginForm.propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    errors: PropTypes.object.isRequired,\n    user: PropTypes.object.isRequired\n};\nexport default LoginForm;","import React, { Component } from 'react';\nimport Auth from '../Auth/Auth';\nimport LoginForm from './LoginForm';\nimport PropTypes from 'prop-types'\nclass LoginPage extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            errors: {},\n            user: {\n                email: '',\n                password: ''\n            }\n        };\n        this.processForm = this.processForm.bind(this);\n        this.changeUser = this.changeUser.bind(this);\n    }\n\n    processForm(event) {\n        event.preventDefault()\n\n        const email = this.state.user.email;\n        const password = this.state.user.password;\n        console.log('email:', email);\n        console.log('password:', password);\n\n        //post login data\n        fetch('http://localhost:3000/auth/login', {\n            method: 'POST',\n            cache: \"no-cache\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                email: this.state.user.email,\n                password: this.state.user.password\n            })\n        }).then(response => {\n            if (response.status === 200) {\n                this.setState({\n                    error: {}\n                });\n\n                response.json().then((json) => {\n                    console.log(json);\n                    Auth.authenticateUser(json.token, email);\n                    this.props.history.replace('/');\n                    // this.props.parentThis.props.history.push('/');\n                });\n            } else {\n                console.log('login failed');\n                response.json().then((json) => {\n                    const errors = json.errors ? json.errors : {};\n                    errors.summary = json.message;\n                    this.setState({ errors });\n                });\n            }\n        });\n    }\n\n    changeUser(event) {\n        const field = event.target.name;\n        const user = this.state.user;\n        user[field] = event.target.value;\n\n        this.setState({ user });\n    }\n\n    render() {\n        return (\n            <LoginForm\n                onSubmit={this.processForm}\n                onChange={this.changeUser}\n                errors={this.state.errors}\n                user={this.state.user}\n            />\n        );\n    }\n}\n// LoginPage.contextTypes = {\n//     router: PropTypes.object.isRequired\n// };\nexport default LoginPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './SignUpForm.css';\nimport { Link } from 'react-router-dom';\n\nconst SignUpForm = ({\n    onSubmit,\n    onChange,\n    errors,\n    user\n}) => (\n    <div className=\"container\">\n        <div className=\"card-panel signup-panel\">\n            <form className=\"col s12\" action=\"/\" onSubmit={onSubmit}>\n                <h4 className=\"center-align\">Sign Up</h4>\n                {errors.summary && <div className=\"row\"><p className=\"error-message\">{errors.summary}</p></div>}\n                <div className=\"row\">\n                    <div className=\"input-field col s12\">\n                        <input id=\"email\" type=\"email\" name=\"email\" className=\"validate\" onChange={onChange}/>\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                </div>\n                {errors.email && <div className=\"row\"><p className=\"error-message\">{errors.email}</p></div>}\n                <div className=\"row\">\n                    <div className=\"input-field col s12\">\n                        <input id=\"password\" type=\"password\" name=\"password\" className=\"validate\" onChange={onChange}/>\n                        <label htmlFor=\"password\">Password</label>\n                    </div>\n                </div>\n                {errors.password && <div className=\"row\"><p className=\"error-message\">{errors.password}</p></div>}\n                <div className=\"row\">\n                    <div className=\"input-field col s12\">\n                        <input id=\"confirm_password\" type=\"password\" name=\"confirm_password\" className=\"validate\" onChange={onChange}/>\n                        <label htmlFor=\"confirm_password\">Confirm Password</label>\n                    </div>\n                </div>\n                <div className=\"row right-align\">\n                    <button type=\"submit\" className=\"waves-effect waves-light btn light-blue darken-4\" value='Sign Up'>Sign Up</button>\n                </div>\n                <div className=\"row\">\n                    <p className=\"right-align\"> Already have an account? <Link to=\"/login\">Log in</Link></p>\n                </div>\n            </form>\n        </div>\n    </div>\n);\n\nSignUpForm.propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    errors: PropTypes.object.isRequired,\n    user: PropTypes.object.isRequired\n}\n\nexport default SignUpForm;","import React, { Component } from 'react';\nimport SignUpForm from './SignUpForm';\n\nclass SignUpPage extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            errors: {},\n            user: {\n                email: '',\n                password: '',\n                confirm_password: ''\n            }\n        }\n\n        this.processForm = this.processForm.bind(this);\n        this.changeUser = this.changeUser.bind(this);\n    }\n\n    processForm(event) {\n        event.preventDefault();\n\n        const email = this.state.user.email;\n        const password = this.state.user.password;\n        const confirm_password = this.state.user.confirm_password;\n\n        console.log('email: ', email);\n        console.log('password: ', password);\n        console.log('confirm_password: ', confirm_password);\n\n        if (password !== confirm_password) {\n            return;\n        }\n\n        fetch('http://localhost:3000/auth/signup', {\n            method: 'POST',\n            cache: 'no-cache',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                email: this.state.user.email,\n                password: this.state.user.password\n            })\n        }).then(response => {\n            if (response.status === 200) {\n                this.setState({\n                    errors: {}\n                })\n                // Change current url to login\n                this.props.history.push('/login');\n            } else {\n                response.json().then(function(json){\n                    console.log(json);\n                    const errors = json.errors? json.errors: {};\n                    errors.summary = json.message;\n                    console.log(this.state.errors);\n                    this.setState({\n                        errors\n                    })\n                }.bind(this));\n            }\n        })\n    }\n\n    changeUser(event) {\n        const field = event.target.name;\n        const user = this.state.user;\n        user[field] = event.target.value;\n\n        this.setState({user});\n        console.log(this.state.user.password);\n        if (this.state.user.password !== this.state.user.confirm_password) {\n            const errors = this.state.errors;\n            errors.password = \"Password and Confirm Password don't match.\";\n            this.setState({ errors });\n        } else {\n            const errors = this.state.errors;\n            errors.password = '';\n            this.setState({ errors });\n        }\n    }\n\n    render() {\n        return (\n            <SignUpForm \n                onSubmit={this.processForm}\n                onChange={this.changeUser}\n                errors={this.state.errors}\n                user={this.state.user}\n            />\n        );\n    }\n}\n\nexport default SignUpPage;","import 'materialize-css/dist/css/materialize.min.css';\nimport 'materialize-css/dist/js/materialize.min.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// import NewsPanel from '../NewsPanel/NewsPanel';\n\n// // import logo from './logo.svg';\n// import './App.css';\n\n// function App() {\n//   return (\n//     <div className=\"App\">\n//         <div className=\"container\">\n//           <NewsPanel/>\n//         </div>\n//     </div>\n//   );\n// }\n\n// export default App;\n\n\nimport React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport './App.css';\nimport NewsPanel from \"../NewsPanel/NewsPanel\";\nimport Base from \"../Base/Base\";\nimport LoginPage from \"../Login/LoginPage\";\nimport SignUpPage from \"../SignUp/SignUpPage\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Base>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n            <Route path=\"/signup\" component={SignUpPage} />\n            <Route path=\"/\" component={NewsPanel} />\n          </Switch>\n        </Base>\n\n      </div>\n    )\n  }\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>, \n    document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}