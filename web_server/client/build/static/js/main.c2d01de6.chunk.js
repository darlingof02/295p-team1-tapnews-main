(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,s){},112:function(e,t,s){},114:function(e,t,s){},126:function(e,t,s){},129:function(e,t,s){},130:function(e,t,s){},138:function(e,t,s){},140:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(37),c=s.n(i),r=(s(109),s(12)),o=s(13),l=s(17),d=s(19),h=(s(110),s(111),s(44),s(14)),u=(s(112),s(16)),j=(s(69),s(40)),m=s.n(j),b=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"authenticateUser",value:function(e,t){localStorage.setItem("token",e),localStorage.setItem("email",t)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token"),localStorage.removeItem("email")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token"),localStorage.removeItem("email")}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getEmail",value:function(){return localStorage.getItem("email")}}]),e}(),p="localhost",g=(s(114),s(115),s(93)),f=s.n(g),O=s(50),v=s(1),w=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:"",color:"light",copied:!1},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.findlike()?this.setState({color:"warning"}):this.setState({color:"light"})}},{key:"redirectToUrl",value:function(e){this.sendClickLog(),window.open(e,"_blank")}},{key:"sendClickLog",value:function(){var e="http://".concat(p,":3000/news/userId/")+b.getEmail()+"/newsId/"+this.props.news.digest,t=new Request(encodeURI(e),{method:"POST",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(t)}},{key:"like",value:function(){var e="http://".concat(p,":3000/news/like/")+b.getEmail()+"/newsId/"+this.props.news.digest,t=new Request(encodeURI(e),{method:"POST",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(t),"warning"===this.state.color?this.setState({color:"light"}):this.setState({color:"warning"})}},{key:"findlike",value:function(){for(var e=0;e<this.props.likelist.length;e++)if(this.props.likelist[e]==this.props.news.digest)return!0;return!1}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{variant:"info",onClick:function(){alert("Successfully copied to clip board"),f()(e.props.news.url)},children:"Share"})," ",Object(v.jsx)(O.a,{variant:this.state.color,onClick:function(){e.like()},children:"Like"})," ",Object(v.jsx)("div",{className:"news-container",onClick:function(){return e.redirectToUrl(e.props.news.url)},children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col s4 fill",children:Object(v.jsx)("img",{src:this.props.news.urlToImage,alt:"news"})}),Object(v.jsx)("div",{className:"col s8",children:Object(v.jsx)("div",{className:"news-intro-col",children:Object(v.jsxs)("div",{className:"news-intro-panel",children:[Object(v.jsx)("h4",{children:this.props.news.title}),Object(v.jsxs)("div",{className:"news-description",children:[Object(v.jsx)("p",{children:this.props.news.description}),Object(v.jsxs)("div",{children:[null!=this.props.news.source.id&&Object(v.jsx)("div",{className:"chip light-blue news-chip",children:this.props.news.source.name}),null!=this.props.news.reason&&Object(v.jsx)("div",{className:"chip light-green news-chip",children:this.props.news.reason}),null!=this.props.news.time&&Object(v.jsx)("div",{className:"chip amber news-chip",children:this.props.news.time})]})]})]})})})]})})]})}}]),s}(a.a.Component),x=w,N=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(r.a)(this,s),(e=t.call(this)).state={news:null,pageNum:1,totalPages:1,loadedAll:!1,likelist:[]},e.handleScroll=e.handleScroll.bind(Object(u.a)(e)),e.renderNews=e.renderNews.bind(Object(u.a)(e)),e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){b.isUserAuthenticated()&&this.loadMoreNews(),this.loadLike(),this.loadMoreNews=m.a.debounce(this.loadMoreNews,1e3),window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;window.innerHeight+e>=document.body.offsetHeight-50&&(console.log("Loading more news"),this.loadMoreNews())}},{key:"loadMoreNews",value:function(e){var t=this;if(!0!==this.state.loadedAll){var s="http://".concat(p,":3000/news/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0!==e.length||t.setState({loadedAll:!0}),t.setState({news:t.state.news?t.state.news.concat(e):e,pageNum:t.state.pageNum+1})}))}}},{key:"loadLike",value:function(e){var t=this,s="http://".concat(p,":3000/news/getlike/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({likelist:e})}))}},{key:"unique",value:function(e){for(var t=e.length,s=0;s<t;s++)for(var n=s+1;n<t;n++)e[s].digest===e[n].digest&&(e.splice(n,1),t--,n--);return e}},{key:"renderNews",value:function(){var e=this.state.likelist;this.state.news=this.unique(this.state.news);var t=this.state.news.map((function(t){return Object(v.jsx)("a",{className:"list-group-item",href:"#",children:Object(v.jsx)(x,{news:t,likelist:e})},t.digest)}));return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"list-group",children:t})})}},{key:"render",value:function(){return b.isUserAuthenticated()?this.state.news?Object(v.jsx)("div",{children:this.renderNews()}):Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"msg-app-loading",children:"Loading"})}):(this.props.history.replace("/login"),Object(v.jsx)("div",{className:"container",children:"Please login first"}))}}]),s}(a.a.Component),k=Object(h.f)(N),y=(s(126),s(86)),S=s(97),L=s(33),C=s(147),T=Object(h.f)((function(e){var t=e.children;e.history;return Object(v.jsxs)("div",{children:[Object(v.jsx)(y.a,{bg:"primary",variant:"dark",children:Object(v.jsxs)(S.a,{children:[Object(v.jsx)(y.a.Brand,{children:"TapNews"}),b.isUserAuthenticated()?Object(v.jsxs)(L.a,{className:"me-auto",children:[Object(v.jsx)(L.a.Link,{href:"/",children:"Home"}),Object(v.jsx)(L.a.Link,{href:"/personal",children:"Profile"}),Object(v.jsx)(L.a.Link,{href:"/favorites",children:"Likes"}),Object(v.jsx)(L.a.Link,{href:"/recommend",children:"Recommend"})]}):null,b.isUserAuthenticated()?Object(v.jsx)(L.a,{className:"me-auto",children:Object(v.jsx)(C.a,{title:"Category",id:"basic-nav-dropdown",children:["Colleges & Schools","Enviormental","World","Entertainment","Media","Politics & Government","Regional News","Religion","Sports","Technology","Traffic","Weather","Economic & Corp","Advertisements","Crime","Magazine","Other"].map((function(e){return Object(v.jsx)(C.a.Item,{href:"/categories/"+e,children:e},e)}))})}):null,b.isUserAuthenticated()?Object(v.jsxs)(L.a,{children:[Object(v.jsxs)(y.a.Text,{children:["Signed in as: ",b.getEmail()]}),Object(v.jsx)(L.a.Link,{href:"/login",onClick:function(){b.logout()},children:"Log out"})]}):Object(v.jsxs)(L.a,{children:[Object(v.jsx)(L.a.Link,{href:"/login",children:"Login"}),Object(v.jsx)(L.a.Link,{href:"/signup",children:"Signup"})]})]})}),t]})})),U=(s(129),s(28)),A=function(e){var t=e.onSubmit,s=e.onChange,n=e.errors;e.user;return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"card-panel login-panel",children:Object(v.jsxs)("form",{className:"col s12",action:"/",onSubmit:t,children:[Object(v.jsx)("h4",{className:"center-align",children:"Login"}),n.summary&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.summary})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"input-field col s12",children:[Object(v.jsx)("input",{className:"validate",id:"email",type:"email",name:"email",onChange:s}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]})}),n.email&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.email})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"input-field col s12",children:[Object(v.jsx)("input",{className:"validate",id:"password",type:"password",name:"password",onChange:s}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]})}),n.password&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.password})}),Object(v.jsx)("div",{className:"row right-align",children:Object(v.jsx)("button",{type:"submit",className:"waves-effect waves-light btn light-blue darken-4",value:"Log in",children:"Log in"})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("p",{className:"right-align",children:[" New to here? ",Object(v.jsx)(U.b,{to:"/signup",children:"Sign up"})]})})]})})})},I=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e,n){var a;return Object(r.a)(this,s),(a=t.call(this,e,n)).state={errors:{},user:{email:"",password:""}},a.processForm=a.processForm.bind(Object(u.a)(a)),a.changeUser=a.changeUser.bind(Object(u.a)(a)),a}return Object(o.a)(s,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var s=this.state.user.email,n=this.state.user.password;console.log("email:",s),console.log("password:",n),fetch("http://".concat(p,":3000/auth/login"),{method:"POST",cache:"no-cache",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.user.email,password:this.state.user.password})}).then((function(e){200===e.status?(t.setState({error:{}}),e.json().then((function(e){console.log(e),b.authenticateUser(e.token,s),t.props.history.replace("/")}))):(console.log("login failed"),e.json().then((function(e){var s=e.errors?e.errors:{};s.summary=e.message,t.setState({errors:s})})))}))}},{key:"changeUser",value:function(e){var t=e.target.name,s=this.state.user;s[t]=e.target.value,this.setState({user:s})}},{key:"render",value:function(){return Object(v.jsx)(A,{onSubmit:this.processForm,onChange:this.changeUser,errors:this.state.errors,user:this.state.user})}}]),s}(n.Component),E=(s(130),function(e){var t=e.onSubmit,s=e.onChange,n=e.errors;e.user;return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"card-panel signup-panel",children:Object(v.jsxs)("form",{className:"col s12",action:"/",onSubmit:t,children:[Object(v.jsx)("h4",{className:"center-align",children:"Sign Up"}),n.summary&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.summary})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"input-field col s12",children:[Object(v.jsx)("input",{id:"email",type:"email",name:"email",className:"validate",onChange:s}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]})}),n.email&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.email})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"input-field col s12",children:[Object(v.jsx)("input",{id:"password",type:"password",name:"password",className:"validate",onChange:s}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]})}),n.password&&Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("p",{className:"error-message",children:n.password})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"input-field col s12",children:[Object(v.jsx)("input",{id:"confirm_password",type:"password",name:"confirm_password",className:"validate",onChange:s}),Object(v.jsx)("label",{htmlFor:"confirm_password",children:"Confirm Password"})]})}),Object(v.jsx)("div",{className:"row right-align",children:Object(v.jsx)("button",{type:"submit",className:"waves-effect waves-light btn light-blue darken-4",value:"Sign Up",children:"Sign Up"})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("p",{className:"right-align",children:[" Already have an account? ",Object(v.jsx)(U.b,{to:"/login",children:"Log in"})]})})]})})})}),P=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={errors:{},user:{email:"",password:"",confirm_password:""}},n.processForm=n.processForm.bind(Object(u.a)(n)),n.changeUser=n.changeUser.bind(Object(u.a)(n)),n}return Object(o.a)(s,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var s=this.state.user.email,n=this.state.user.password,a=this.state.user.confirm_password;console.log("email: ",s),console.log("password: ",n),console.log("confirm_password: ",a),n===a&&fetch("http://".concat(p,":3000/auth/signup"),{method:"POST",cache:"no-cache",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.user.email,password:this.state.user.password})}).then((function(e){200===e.status?(t.setState({errors:{}}),t.props.history.push("/login")):e.json().then(function(e){console.log(e);var t=e.errors?e.errors:{};t.summary=e.message,console.log(this.state.errors),this.setState({errors:t})}.bind(t))}))}},{key:"changeUser",value:function(e){var t=e.target.name,s=this.state.user;if(s[t]=e.target.value,this.setState({user:s}),console.log(this.state.user.password),this.state.user.password!==this.state.user.confirm_password){var n=this.state.errors;n.password="Password and Confirm Password don't match.",this.setState({errors:n})}else{var a=this.state.errors;a.password="",this.setState({errors:a})}}},{key:"render",value:function(){return Object(v.jsx)(E,{onSubmit:this.processForm,onChange:this.changeUser,errors:this.state.errors,user:this.state.user})}}]),s}(n.Component),R=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={news:null,pageNum:1,totalPages:1,loadedAll:!1,category:n.props.match.params.category,likelist:[]},n.handleScroll=n.handleScroll.bind(Object(u.a)(n)),n.renderNews=n.renderNews.bind(Object(u.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){b.isUserAuthenticated()&&this.loadClassNews(),this.loadMoreNews=m.a.debounce(this.loadClassNews,1e3),this.loadLike(),window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;window.innerHeight+e>=document.body.offsetHeight-50&&(console.log("Loading more news"),this.loadClassNews())}},{key:"loadClassNews",value:function(e){var t=this;if(!0!==this.state.loadedAll){var s="http://".concat(p,":3000/news/userId/")+b.getEmail()+"/".concat(this.state.category,"/pageNum/")+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){console.log("category"+t.state.category),console.log(e),console.log("category"+t.state.category),e&&0!==e.length||t.setState({loadedAll:!0}),t.setState({news:t.state.news?t.state.news.concat(e):e,pageNum:t.state.pageNum+1})}))}}},{key:"unique",value:function(e){for(var t=e.length,s=0;s<t;s++)for(var n=s+1;n<t;n++)e[s].digest===e[n].digest&&(e.splice(n,1),t--,n--);return e}},{key:"renderNews",value:function(){var e=this.state.category;this.state.news=this.unique(this.state.news);var t=this.state.likelist,s=this.state.news.map((function(s){return s.class==e?Object(v.jsx)("a",{className:"list-group-item",href:"#",children:Object(v.jsx)(x,{news:s,likelist:t})},s.digest):Object(v.jsx)("div",{})}));return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"list-group",children:s})})}},{key:"loadLike",value:function(e){var t=this,s="http://".concat(p,":3000/news/getlike/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({likelist:e})}))}},{key:"render",value:function(){return b.isUserAuthenticated()?this.state.news?Object(v.jsx)("div",{children:this.renderNews()}):Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"msg-app-loading",children:"Loading"})}):(this.props.history.replace("/login"),Object(v.jsx)("div",{className:"container",children:"Please login first"}))}}]),s}(a.a.Component),q=Object(h.f)(R),F=s(7),M=(s(139),s(149)),z=s(148),G=function(e){e.update;var t=e.attr,s=Object(n.useState)(!1),a=Object(F.a)(s,2),i=a[0],c=a[1],r=Object(n.useState)(""),o=Object(F.a)(r,2),l=o[0],d=o[1],h=function(){return c(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.a,{variant:"primary",onClick:function(){return c(!0)},children:"Update"}),Object(v.jsxs)(M.a,{show:i,onHide:h,children:[Object(v.jsx)(M.a.Header,{closeButton:!0,children:Object(v.jsxs)(M.a.Title,{children:["Update ",t]})}),Object(v.jsx)(M.a.Body,{children:Object(v.jsx)(z.a,{children:Object(v.jsxs)(z.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(v.jsx)(z.a.Label,{children:t}),Object(v.jsx)(z.a.Control,{autoFocus:!0,onChange:function(e){d(e.target.value)}})]})})}),Object(v.jsxs)(M.a.Footer,{children:[Object(v.jsx)(O.a,{variant:"secondary",onClick:h,children:"Close"}),Object(v.jsx)(O.a,{variant:"primary",onClick:function(){console.log(l),console.log(t),function(e,t){var s="http://".concat(p,":3000/news/update/")+b.getEmail();console.log("hhhh",e,t);var n=new Request(encodeURI(s),{method:"POST",headers:{Authorization:"bearer "+b.getToken(),"Content-Type":"application/json"},cache:"no-cache",body:JSON.stringify({user_info:e,attr:t})});fetch(n)}(l,t),h(),window.location.reload(!1)},children:"Save"})]})]})]})},H=(s(138),function(){var e=Object(n.useState)({email:"yuninx1@uci.edu",birthday:new Date,alias:"hello world",country:"US"}),t=Object(F.a)(e,2),s=t[0],a=t[1],i=Object(n.useState)(""),c=Object(F.a)(i,2),r=c[0],o=c[1],l=Object(n.useState)(""),d=Object(F.a)(l,2),h=d[0],u=d[1],j=Object(n.useState)(""),m=Object(F.a)(j,2),g=m[0],f=m[1],O=Object(n.useState)(""),w=Object(F.a)(O,2),x=w[0],N=w[1];Object(n.useEffect)((function(){k(),console.log(s)}),[]);var k=function(){var e="http://".concat(p,":3000/news/userId/")+b.getEmail(),t=new Request(encodeURI(e),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});console.log("beforefetch"),fetch(t).then((function(e){return e.json()})).then((function(e){console.log(e[0]),a(e[0]),o(e[0].email),u(e[0].birthday),f(e[0].alias),N(e[0].country)})),console.log("afterfetch")};return Object(v.jsxs)("div",{className:"ProfileContainer",children:[Object(v.jsx)("div",{className:"ProfileTitle title",children:"This is Profile"}),Object(v.jsxs)("div",{className:"ProfileContainer",children:[Object(v.jsxs)("div",{className:"ProfileItem",children:[Object(v.jsx)("div",{className:"ProfileLabel",children:Object(v.jsx)("div",{children:"Email:"})}),Object(v.jsx)("div",{className:"ProfileContent",children:Object(v.jsx)("div",{children:void 0===r||""===r?"None Set":r})})]}),Object(v.jsxs)("div",{className:"ProfileItem",children:[Object(v.jsx)("div",{className:"ProfileLabel",children:Object(v.jsx)("div",{children:"Birthday:"})}),Object(v.jsxs)("div",{className:"ProfileContent",children:[Object(v.jsx)("div",{children:void 0===h||""===h?"None Set":h}),Object(v.jsx)(G,{update:function(){alert("Birthday changed")},attr:"birthday"})]})]}),Object(v.jsxs)("div",{className:"ProfileItem",children:[Object(v.jsx)("div",{className:"ProfileLabel",children:Object(v.jsx)("div",{children:"Alias:"})}),Object(v.jsxs)("div",{className:"ProfileContent",children:[Object(v.jsx)("div",{children:void 0===g||""===g?"None Set":g}),Object(v.jsx)(G,{update:function(){alert("display of name changed")},attr:"alias"})]})]}),Object(v.jsxs)("div",{className:"ProfileItem",children:[Object(v.jsx)("div",{className:"ProfileLabel",children:Object(v.jsx)("div",{children:"Country:"})}),Object(v.jsxs)("div",{className:"ProfileContent",children:[Object(v.jsx)("div",{children:void 0===x||""===x?"None Set":x}),Object(v.jsx)(G,{update:function(){alert("residency of country changed")},attr:"country"})]})]})]})]})}),_=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={news:null,pageNum:1,totalPages:1,loadedAll:!1,likelist:[]},n.handleScroll=n.handleScroll.bind(Object(u.a)(n)),n.renderNews=n.renderNews.bind(Object(u.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){b.isUserAuthenticated()&&this.loadLikedNews(),console.log("did redirect"),this.loadMoreNews=m.a.debounce(this.loadLikedNews,1e3),this.loadLike(),window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;window.innerHeight+e>=document.body.offsetHeight-50&&(console.log("Loading more news"),this.loadLikedNews())}},{key:"loadLike",value:function(e){var t=this,s="http://".concat(p,":3000/news/getlike/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({likelist:e})}))}},{key:"loadLikedNews",value:function(e){var t=this;if(console.log("did loadlike"),!0!==this.state.loadedAll){console.log("liked User: "+b.getEmail());var s="http://".concat(p,":3000/news/liked/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){e&&0!==e.length||t.setState({loadedAll:!0}),t.setState({news:t.state.news?t.state.news.concat(e):e,pageNum:t.state.pageNum+1})}))}}},{key:"unique",value:function(e){for(var t=e.length,s=0;s<t;s++)for(var n=s+1;n<t;n++)e[s].digest===e[n].digest&&(e.splice(n,1),t--,n--);return e}},{key:"renderNews",value:function(){var e=this.state.likelist;this.state.news=this.unique(this.state.news),console.log(" ----- "),console.log(this.state.news),console.log(" ----- ");var t=this.state.news.map((function(t){return console.log(t.class),Object(v.jsx)("a",{className:"list-group-item",href:"#",children:Object(v.jsx)(x,{news:t,likelist:e})},t.digest)}));return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"list-group",children:t})})}},{key:"render",value:function(){return b.isUserAuthenticated()?this.state.news?Object(v.jsx)("div",{children:this.renderNews()}):Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"msg-app-loading",children:"Loading"})}):(this.props.history.replace("/login"),Object(v.jsx)("div",{className:"container",children:"Please login first"}))}}]),s}(a.a.Component),D=Object(h.f)(_),Y=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={news:null,pageNum:1,totalPages:1,loadedAll:!1,likelist:[]},n.handleScroll=n.handleScroll.bind(Object(u.a)(n)),n.renderNews=n.renderNews.bind(Object(u.a)(n)),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){b.isUserAuthenticated()&&this.loadLikedNews(),this.loadLike(),this.loadLikedNews=m.a.debounce(this.loadLikedNews,1e3),window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;window.innerHeight+e>=document.body.offsetHeight-50&&(console.log("Loading more news"),this.loadLike(),this.loadLikedNews())}},{key:"loadLikedNews",value:function(e){var t=this;if(!0!==this.state.loadedAll){var s="http://".concat(p,":3000/news/recommend/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){e&&0!==e.length||t.setState({loadedAll:!0}),t.setState({news:t.state.news?t.state.news.concat(e):e,pageNum:t.state.pageNum+1})}))}}},{key:"loadLike",value:function(e){var t=this,s="http://".concat(p,":3000/news/getlike/userId/")+b.getEmail()+"/pageNum/"+this.state.pageNum,n=new Request(encodeURI(s),{method:"GET",headers:{Authorization:"bearer "+b.getToken()},cache:"no-cache"});fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({likelist:e})}))}},{key:"unique",value:function(e){for(var t=e.length,s=0;s<t;s++)for(var n=s+1;n<t;n++)e[s].digest===e[n].digest&&(e.splice(n,1),t--,n--);return e}},{key:"renderNews",value:function(){var e=this.state.likelist;this.state.news=this.unique(this.state.news),console.log(this.state.news);var t=this.state.news.map((function(t){return console.log(t.class),Object(v.jsx)("a",{className:"list-group-item",href:"#",children:Object(v.jsx)(x,{news:t,likelist:e})},t.digest)}));return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"list-group",children:t})})}},{key:"render",value:function(){return b.isUserAuthenticated()?this.state.news?Object(v.jsx)("div",{children:this.renderNews()}):Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"msg-app-loading",children:"Loading"})}):(this.props.history.replace("/login"),Object(v.jsx)("div",{className:"container",children:"Please login first"}))}}]),s}(a.a.Component),B=Object(h.f)(Y),J=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(T,{children:Object(v.jsxs)(h.c,{children:[Object(v.jsx)(h.a,{path:"/login",component:I}),Object(v.jsx)(h.a,{path:"/signup",component:P}),Object(v.jsx)(h.a,{path:"/categories/:category",component:q}),Object(v.jsx)(h.a,{path:"/favorites",component:D}),Object(v.jsx)(h.a,{path:"/recommend",component:B}),Object(v.jsx)(h.a,{path:"/personal",component:H}),Object(v.jsx)(h.a,{path:"/",component:k})]})})})}}]),s}(a.a.Component),W=J;c.a.render(Object(v.jsx)(U.a,{children:Object(v.jsx)(W,{})}),document.getElementById("root"))},69:function(e,t,s){}},[[140,1,2]]]);
//# sourceMappingURL=main.c2d01de6.chunk.js.map